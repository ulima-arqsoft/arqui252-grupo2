> [8. Aplicaci√≥n de Patrones Arquitecturales](../8.md) ‚Ä∫ [8.4. M√≥dulo 4 / Integrante 4](8.4.md)

# 8.4. M√≥dulo 4 / Integrante 4

## M√≥dulo de Rese√±as y Calificaciones

## Patrones de M√≥dulo

### ADR 1: Arquitectura en Capas (Layered Architecture)

**Contexto**
El m√≥dulo de rese√±as maneja l√≥gica compleja para filtrado, ordenamiento y persistencia de datos. Mezclar el acceso a datos, la l√≥gica de negocio y el manejo de peticiones HTTP en un solo lugar dificulta la mantenibilidad y las pruebas unitarias, especialmente cuando se requieren cambios frecuentes como agregar nuevos filtros (ESC-16).

**Alternativas Consideradas**
1. **Arquitectura en Capas (Controller, Service, Repository)**: Separaci√≥n estricta de responsabilidades.
2. **Smart UI / Todo en el Controlador**: L√≥gica de negocio y acceso a datos mezclados en los manejadores de rutas.

**Decisi√≥n**
Se adopta la **Arquitectura en Capas**.
- **Controller**: Maneja las peticiones HTTP y validaci√≥n de entrada.
- **Service**: Contiene la l√≥gica de negocio (ej. reglas de filtrado).
- **Repository**: Abstrae el acceso a la base de datos.

**Sustento**
- **Facilita ESC-16 (Mantenibilidad)**: Agregar un filtro nuevo solo requiere cambios en la capa de Servicio y Repositorio, sin tocar el controlador.
- **Mejora la testabilidad**: Se pueden probar los servicios de validaci√≥n y filtrado aislados de la base de datos.
- **Organizaci√≥n**: Estructura clara para manejar la complejidad de las consultas de rese√±as.

---

## Patrones de Componentes y Conector

### ADR 2: Cliente-Servidor

**Contexto**
El sistema debe permitir que los estudiantes busquen y visualicen rese√±as desde diferentes interfaces (web, m√≥vil) de manera eficiente. El backend debe ser capaz de procesar b√∫squedas complejas y devolver resultados paginados (ESC-14) sin estar acoplado a una tecnolog√≠a de presentaci√≥n espec√≠fica.

**Alternativas Consideradas**
1. **Cliente-Servidor (REST API)**: El servidor expone recursos (rese√±as) y el cliente gestiona la presentaci√≥n.
2. **Microservicios con Server-Side Rendering**: El servidor genera el HTML completo.

**Decisi√≥n**
Se adopta el patr√≥n **Cliente-Servidor**.

**Sustento**
- **Soporta ESC-14 (Usabilidad)**: El servidor entrega datos crudos (JSON) paginados, permitiendo que el cliente renderice la lista y maneje la interacci√≥n de filtros de manera fluida.
- **Escalabilidad (ESC-01)**: Permite escalar el servidor de backend independientemente de la interfaz de usuario para manejar la carga de 300 usuarios concurrentes.

---

### ADR 3: Publicar-Suscribir (Publish-Subscribe)

**Contexto**
El sistema est√° compuesto por microservicios que necesitan compartir informaci√≥n actualizada de sus entidades (tablas) para mantener la consistencia de datos sin acoplamiento directo. Se requiere un mecanismo eficiente para propagar cambios y sincronizar tablas cach√© entre los servicios.

**Alternativas Consideradas**
1. **Publicar-Suscribir con Broker**: Uso de un intermediario para distribuir eventos de cambio de datos a los servicios interesados.
2. **Consultas S√≠ncronas entre Servicios**: Solicitar datos actualizados v√≠a HTTP cada vez que se necesitan.

**Decisi√≥n**
Se adopta el patr√≥n **Publicar-Suscribir** utilizando un **Message Broker** para la sincronizaci√≥n de informaci√≥n mediante tablas cach√©.

**Sustento**
- **Sincronizaci√≥n de Datos**: Permite que cuando un servicio actualice su tabla maestra, publique un evento que otros servicios consumen para actualizar sus tablas cach√© locales.
- **Desacoplamiento y Rendimiento**: Evita llamadas s√≠ncronas constantes entre servicios para obtener datos de referencia, reduciendo la latencia y la dependencia directa.

---

### ADR 4: Arquitectura Orientada a Servicios (SOA)

**Contexto**
El m√≥dulo de rese√±as debe interactuar con otros componentes del sistema (como el m√≥dulo de Perfiles y Autenticaci√≥n) y potencialmente con sistemas externos. Se requiere un mecanismo que permita exponer la funcionalidad de negocio de las rese√±as (creaci√≥n, consulta, gesti√≥n) como servicios reutilizables y distribuidos, evitando el acoplamiento directo a nivel de base de datos.

**Alternativas Consideradas**
1. **Arquitectura Orientada a Servicios (SOA)**: Dise√±o basado en servicios interoperables que se comunican a trav√©s de contratos estandarizados, facilitando la integraci√≥n y reutilizaci√≥n.
2. **Integraci√≥n Ad-hoc / Punto a Punto**: Conexiones directas y espec√≠ficas entre componentes sin un est√°ndar de comunicaci√≥n.

**Decisi√≥n**
Se adopta la **Arquitectura Orientada a Servicios (SOA)**.

**Sustento**

- **Escalabilidad**: Facilita la distribuci√≥n del m√≥dulo en nodos independientes si la carga lo requiere, comunic√°ndose con el resto del sistema mediante protocolos est√°ndar (REST/HTTP).

---

## Patrones Cloud

### ADR 5: Competing Consumers

**Contexto**
La generaci√≥n de reportes (ESC-04) es una operaci√≥n intensiva que puede recibir picos de solicitudes simult√°neas. Procesar estas solicitudes de manera s√≠ncrona o con un solo consumidor podr√≠a saturar el servicio y aumentar los tiempos de espera, afectando la disponibilidad.

**Alternativas Consideradas**
1. **Competing Consumers**: Utilizar m√∫ltiples instancias de consumidores (workers) que compiten por procesar mensajes de una √∫nica cola de tareas.
2. **Consumidor √önico / Procesamiento S√≠ncrono**: Un solo proceso manejando todas las solicitudes en orden o bloqueando la respuesta HTTP.

**Decisi√≥n**
Se adopta el patr√≥n **Competing Consumers**.

**Sustento**
- **Escalabilidad y Rendimiento (ESC-04)**: Permite distribuir la carga de generaci√≥n de reportes entre m√∫ltiples workers. Si la cola crece, se pueden a√±adir m√°s consumidores din√°micamente para mantener el throughput.
- **Desacoplamiento**: El servicio que recibe la solicitud solo la encola, liber√°ndose inmediatamente, mientras los consumidores procesan el trabajo pesado en segundo plano.

---

[‚¨ÖÔ∏è Anterior](../8.3/8.3.md) | [üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../8.5/8.5.md)