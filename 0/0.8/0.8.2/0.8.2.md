> [0. Acerca del Grupo](../../0.md) ‚Ä∫ [0.8. Temas Individuales (Parte 2)](../0.8.md) ‚Ä∫ [0.8.2. Integrante 2](0.8.2.md)

# 0.8.2. Integrante 2

Content Delivery Network (CDN): CloudFlare y S3 AWS

---
## Content Delivery Network (CDN)

Una Content Delivery Network (CDN) es una red distribuida de servidores que entrega contenido web a los usuarios de manera eficiente seg√∫n su ubicaci√≥n geogr√°fica. El objetivo principal de una CDN es reducir la latencia, mejorar la velocidad de carga y garantizar la disponibilidad del contenido, especialmente en aplicaciones web con alto tr√°fico o distribuci√≥n global.

### Funcionamiento b√°sico

Cuando un usuario solicita un recurso (por ejemplo, una imagen o un archivo CSS/JS), la CDN lo entrega desde el servidor m√°s cercano geogr√°ficamente, en lugar de desde el servidor de origen. Esto reduce los tiempos de respuesta y disminuye la carga sobre el servidor principal.

Ejemplo conceptual:

- Sin CDN: Un usuario en Tokio accede a un servidor en Nueva York ‚Üí retrasos por distancia y congesti√≥n de red.
- Con CDN: El usuario en Tokio accede al contenido desde un nodo local en Asia ‚Üí menor latencia y mayor velocidad.

### Beneficios del uso de una CDN

1. Reducci√≥n de latencia: El contenido se sirve desde nodos cercanos al usuario.
2. Alta disponibilidad: Distribuci√≥n de contenido en m√∫ltiples servidores evita ca√≠das por saturaci√≥n o fallos locales.
3. Escalabilidad: Permite manejar picos de tr√°fico sin sobrecargar el servidor principal.
4. Seguridad: Muchas CDNs ofrecen mitigaci√≥n de ataques DDoS y optimizaci√≥n de HTTPS.
5. Optimizaci√≥n de ancho de banda: El tr√°fico se reparte entre m√∫ltiples nodos, reduciendo costos de transferencia desde el servidor de origen.

### Ejemplos de uso

- Plataformas de streaming como Netflix o YouTube, donde millones de usuarios consumen contenido simult√°neamente.
- Tiendas de e-commerce con clientes globales, para reducir el tiempo de carga de im√°genes de productos.
- Aplicaciones web con alto tr√°fico est√°tico, como blogs, portales de noticias o landing pages.

---

### Consideraciones t√©cnicas

La implementaci√≥n y comparaci√≥n entre **S3 como servidor normal** y **Cloudflare como CDN** incluye los siguientes aspectos:

| Aspecto | Servidor Normal (S3) | Servidor con CDN (Cloudflare) |
|---------|---------------------|-------------------------------|
| **Ubicaci√≥n de recursos** | Un √∫nico bucket en una regi√≥n de AWS | Distribuci√≥n global en m√∫ltiples nodos |
| **Tiempo de carga** | Depende de la distancia del usuario al bucket | Optimizado por nodo m√°s cercano al usuario |
| **Gesti√≥n de tr√°fico** | Riesgo de saturaci√≥n si hay picos de acceso | Distribuido autom√°ticamente entre nodos, soporta picos grandes |
| **Seguridad** | Basada en pol√≠ticas de S3 y permisos de acceso | Protecci√≥n adicional: DDoS, WAF, SSL gestionado |
| **Costo de transferencia** | Basado en el tr√°fico que sale del bucket | Reducci√≥n del tr√°fico directo al origen, costo por cacheado |
| **Escalabilidad** | Limitada por la capacidad del bucket y la regi√≥n | Escalable autom√°ticamente con la red CDN |
| **Caching y optimizaci√≥n** | No disponible de forma nativa | Cacheo de contenido est√°tico configurable (TTL, purgado, reglas) |


### Demo: Implementaci√≥n de una CDN con Cloudflare y S3 AWS

Con el objetivo de demostrar la aplicaci√≥n pr√°ctica de una Content Delivery Network (CDN), se realiz√≥ una implementaci√≥n utilizando¬†Amazon S3¬†como almacenamiento de archivos y¬†Cloudflare¬†como CDN. El entorno de pruebas se configur√≥ sobre un proyecto frontend desarrollado en¬†React, permitiendo comparar la carga de recursos directamente desde S3 versus a trav√©s de Cloudflare.

#### Configuraci√≥n del entorno

El entorno de trabajo incluy√≥:

1. Amazon S3:
    
    - Se cre√≥ un bucket para almacenar archivos est√°ticos (im√°genes y videos).
        
    - Se configuraron los permisos de lectura p√∫blica para que los archivos puedan ser accedidos desde el frontend.
        
    - Se habilitaron opcionalmente el versionado y los logs de acceso para monitoreo.
        
2. Cloudflare:
    
    - Se cre√≥ una cuenta gratuita en Cloudflare y se agreg√≥ el dominio utilizado en el proyecto.
        
    - Se configur√≥ el DNS para apuntar al bucket de S3 a trav√©s de Cloudflare.
        
    - Se habilit√≥ el cacheo de archivos est√°ticos con reglas de TTL, purgado de cache y SSL gestionado.
        
    - Se activaron medidas de seguridad adicionales (WAF, mitigaci√≥n de DDoS).
        
3. Proyecto React:
    
    - Se desarroll√≥ un frontend en React con dos p√°ginas principales:
        
        1. P√°gina de selecci√≥n de fuente de recursos: permite elegir si los archivos se obtienen desde el bucket S3 directamente o mediante Cloudflare CDN.
            
        2. P√°gina de visualizaci√≥n de recursos: carga im√°genes y videos, mostrando m√©tricas de carga como tiempo de respuesta y tama√±o de transferencia.
            

---

#### Creaci√≥n del c√≥digo de prueba

El proyecto incluy√≥ componentes React para simular la carga de recursos desde ambos m√©todos:

| Componente        | Funci√≥n                                                | M√©trica observada                          |
| ----------------- | ------------------------------------------------------ | ------------------------------------------ |
| `HomePage.jsx`    | Permite elegir la fuente de los archivos (S3 o CDN)    | Ninguna, interfaz de selecci√≥n             |
| `ImageGrid.jsx`   | Muestra im√°genes cargadas desde la fuente seleccionada | Tiempo de carga por imagen                 |
| `VideoGrid.jsx`   | Reproduce videos cargados desde la fuente seleccionada | Tiempo de buffer y tama√±o de transferencia |
| `GalleryPage.jsx` | Presenta las m√©tricas de carga y transferencia         | Latencia, ancho de banda consumido         |

**Ejemplo de c√≥digo de selecci√≥n de fuente:**

`const cdnEnabled = JSON.parse(localStorage.getItem("cdnEnabled")) || false;`

`function getMediaUrl(path, cdnEnabled) {`

  `const base = cdnEnabled ? CF_BASE_URL : S3_BASE_URL;`

  `return ${base}/${path};`

`}`


**Calculo de m√©tricas:**

`const processedMetrics = mediaResources.map(entry => ({`

  `url: entry.name,`

  `fileName: entry.name.split("/").pop(),`

  `duration: Math.round(entry.duration),`

  `ttfb: Math.round(entry.responseStart - entry.requestStart),`

  `downloadTime: Math.round(entry.responseEnd - entry.responseStart),`

  `fromCache: entry.transferSize === 0 && entry.decodedBodySize > 0,`

  `servedFrom: entry.name.includes(CF_BASE_URL) ? "CloudFront CDN" : "S3 Direct"`

`}));`

---

### Resultados de la demo

Durante la demo, se cargaron varias im√°genes y videos desde¬†S3 directamente¬†y desde¬†Cloudflare CDN. Se registraron las m√©tricas de tiempo de carga y transferencia de datos, observando los siguientes resultados:

- Carga desde S3: mayor latencia y tiempos de carga m√°s altos para usuarios ubicados lejos de la regi√≥n del bucket.
    
- Carga desde Cloudflare: tiempos de carga significativamente menores gracias al cacheo y distribuci√≥n geogr√°fica.
    

Se incluyeron capturas de pantalla y gr√°ficos para visualizar la comparaci√≥n de m√©tricas:
![demo1](demo1.png)
![demo2](demo2.png)
![demo3](demo3.png)
![demo3](demo3.png)

---
#### Anexos
Todo el c√≥digo de la demo fue publicado en el repositorio individual en GitHub, permitiendo a otros estudiantes revisar, ejecutar y experimentar con la t√°ctica desarrollada.

**URL del repositorio:**¬†https://github.com/ulima-arqsoft/arqui252-rodriguez-ybarra.git

**Video:** https://drive.google.com/file/d/1btfRI8cFnLQOGMAlFjeWu28Z0axMar70/view?usp=sharing


---

[‚¨ÖÔ∏è Anterior](../0.8.1/0.8.1.md) | [üè† Home](../../../README.md) | [Siguiente ‚û°Ô∏è](../0.8.3/0.8.3.md)