> [5. T√°cticas](../5.md) ‚Ä∫ [5.2. M√≥dulo 2 / Integrante 2](5.2.md)

# 5.2. M√≥dulo 2 / Integrante 2

## M√≥dulo de Administraci√≥n General

## T√°ctica 1: Disponibilidad

### Escenario

| **Cod Escenario** | **Atributo de Calidad** | **Est√≠mulo**                                                                                                   | **Fuente del Est√≠mulo** | **Artefacto**             | **Entorno**                  | **Respuesta**                                                                                               | **Medida de Respuesta**                                |
| ----------------- | ----------------------- | -------------------------------------------------------------------------------------------------------------- | ----------------------- | ------------------------- | ---------------------------- | ----------------------------------------------------------------------------------------------------------- | ------------------------------------------------------ |
| ESC-02            | Disponibilidad          | Fallo del servidor principal (administraci√≥n, rese√±as o perfiles) durante horario laboral de operaci√≥n cr√≠tica | Servidor principal      | Servicio de base de datos | Operaci√≥n en entorno cr√≠tico | El sistema debe reiniciar autom√°ticamente el servicio o notificar al administrador para recuperaci√≥n manual | El tiempo de indisponibilidad no supera los¬†10 minutos |


### T√°ctica Elegida

En este caso, para alcanzar los niveles de disponibilidad requeridos seg√∫n el escenario (tiempo de recuperaci√≥n menor a 10 minutos), se ha decidido aplicar la t√°ctica de redundancia pasiva. A continuaci√≥n, se documentan los detalles de la decisi√≥n.
### Documentaci√≥n de la Decisi√≥n (ADR)

**T√≠tulo:**  
Elecci√≥n entre redundancia pasiva vs redundancia activa vs repuesto¬†para el m√≥dulo de Administraci√≥n General.

**Contexto:**  
El sistema cuenta con servicios cr√≠ticos, como los m√≥dulos de administraci√≥n, rese√±as y perfiles, que deben mantener alta disponibilidad durante el horario laboral. Ante un posible fallo del servidor principal de base de datos, se requiere garantizar la continuidad operativa con un tiempo de recuperaci√≥n no mayor a 10 minutos, evitando p√©rdidas significativas de datos y reduciendo la interrupci√≥n del servicio a los usuarios.

**Alternativas:**

1. **Hot Spare (redundancia activa):**  
    - Mantener un servidor secundario completamente sincronizado y disponible para failover autom√°tico. Proporciona conmutaci√≥n inmediata, pero conlleva mayores costos de infraestructura y complejidad de configuraci√≥n.
    
2. **Warm Spare (redundancia pasiva):**  
    - Mantener un servidor secundario configurado en modo r√©plica as√≠ncrona, actualizado peri√≥dicamente con los registros de escritura (WAL) del servidor principal. El servidor se activa manual o semiautom√°ticamente en caso de falla. Ofrece un balance adecuado entre costo, tiempo de recuperaci√≥n y simplicidad de mantenimiento.
    
3. **Cold Spare (respaldo inactivo):**  
    - Mantener un servidor apagado o sin conexi√≥n, que se active solo ante una falla. Requiere configuraci√≥n manual y puede superar el tiempo m√°ximo de indisponibilidad establecido.
    

**Criterios de Elecci√≥n:**

- Disponibilidad del sistema durante operaci√≥n cr√≠tica.
- Tiempo de recuperaci√≥n ante falla del servidor principal.
- P√©rdida m√≠nima de datos.
- Costo de infraestructura y mantenimiento.
- Complejidad de implementaci√≥n y supervisi√≥n.

**Decisi√≥n:**  
Se adoptar√° una¬†arquitectura de redundancia pasiva. Esta configuraci√≥n incluir√° un servidor secundario PostgreSQL en modo r√©plica as√≠ncrona, que podr√° ser promovido a principal mediante un proceso manual o semiautom√°tico de¬†failover, complementado por monitoreo continuo y scripts de reconexi√≥n en el backend Express.

**Sustento:**  
La t√°ctica¬†Warm Spare¬†permite cumplir con el objetivo de mantener el tiempo de indisponibilidad bajo los 10 minutos establecidos en el escenario de disponibilidad, sin incurrir en los altos costos de una soluci√≥n de redundancia activa. Adem√°s, ofrece una recuperaci√≥n r√°pida y controlada, minimiza la p√©rdida de datos gracias a la replicaci√≥n peri√≥dica, y mantiene una complejidad t√©cnica moderada que facilita su implementaci√≥n y mantenimiento en entornos cr√≠ticos.

---
## T√°ctica 2: Usabilidad

### Escenario

| **Cod Escenario** | **Atributo de Calidad** | **Est√≠mulo**                                                                                                                                                                | **Fuente del Est√≠mulo** | **Artefacto**                         | **Entorno**        | **Respuesta**                                                                  | **Medida de Respuesta**                                          |
| ----------------- | ----------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- | ------------------------------------- | ------------------ | ------------------------------------------------------------------------------ | ---------------------------------------------------------------- |
| ESC-03            | Usabilidad              | Administrador sin experiencia t√©cnica necesita cambiar estados de cuenta, configurar categor√≠as, buscar rese√±as, ordenar datos, editar perfil o actualizar foto desde m√≥vil | Usuario Administrador   | Pantalla de gesti√≥n del Administrador | Primera vez de uso | El administrador puede completar la acci√≥n sin necesidad de asistencia externa | La acci√≥n se realiza en¬†menos de 3 pasos y en¬†menos de 2 minutos |



### T√°ctica Elegida

En este caso, para mantener un sistema de navegaci√≥n simple que permita completar una acci√≥n en menos de tres pasos, se ha decidido emplear una combinaci√≥n de las t√°cticas de usabilidad: mantener el modelo del usuario y agrupar funcionalidades. A continuaci√≥n, se documentan los detalles de la decisi√≥n.
### Documentaci√≥n de la Decisi√≥n (ADR)

**T√≠tulo:**  
Adopci√≥n de una interfaz basada en el modelo del usuario y agrupaci√≥n de funcionalidades para mejorar la usabilidad del m√≥dulo administrativo

**Contexto:**  
El m√≥dulo de Administraci√≥n General ser√° utilizado por administradores sin experiencia t√©cnica, quienes deben realizar tareas como cambiar estados de cuenta, configurar categor√≠as, gestionar rese√±as, editar perfiles y actualizar im√°genes desde dispositivos m√≥viles. Para garantizar la usabilidad y accesibilidad del sistema, se requiere definir una estrategia de dise√±o que permita a los usuarios completar estas acciones de forma intuitiva y eficiente, en menos de tres pasos y dos minutos, sin necesidad de asistencia externa.

**Alternativas:**

1. **Mantener el modelo de tareas:**  
	- Predecir la tarea que el usuario desea realizar para brindarle asistencia contextual (por ejemplo, ofrecer autocompletar o sugerencias seg√∫n el tipo de entrada), de modo que la interfaz anticipe y facilite la secuencia de acciones.

3. **Mantener el modelo del usuario:**  
	- Registrar y aprovechar h√°bitos de uso individuales para personalizar el comportamiento de la interfaz (por ejemplo, mostrar primero las acciones m√°s frecuentes o recordar filtros preferidos del administrador).

5. **Mantener el modelo del sistema:**  
	- Exponer el estado interno y el progreso de las operaciones (por ejemplo, barras de progreso, pasos de una transacci√≥n, mensajes de estado) para ofrecer feedback claro sobre lo que est√° ocurriendo en el sistema y reducir la incertidumbre del usuario.

7. **Combinaci√≥n propuesta (modelo del usuario y agrupaci√≥n de funcionalidades):**  
	- Dise√±ar la interfaz siguiendo el modelo mental del usuario (objetivos y h√°bitos) y agrupar funciones relacionadas en secciones claras (por ejemplo:¬†Usuarios,¬†Contenido,¬†Configuraci√≥n), complementando con ayudas contextuales (sugerencias/auto-completar) y feedback de sistema cuando corresponda.

**Criterios de Elecci√≥n:**

- Claridad y facilidad de aprendizaje.
- Eficiencia en la ejecuci√≥n de tareas (‚â§ 3 pasos, ‚â§ 2 minutos).
- Adaptabilidad al perfil del usuario no t√©cnico.

**Decisi√≥n:**  
Se adopta la¬†combinaci√≥n de mantener el modelo del usuario y agrupar funcionalidades, complementada con elementos del¬†modelo de tareas¬†(asistencias contextuales) y del¬†modelo del sistema¬†(feedback de estado) seg√∫n corresponda por flujo.

**Sustento:**  
Priorizar el¬†modelo del usuario¬†y la¬†agrupaci√≥n por objetivos¬†asegura que la interfaz se alinee con las expectativas y h√°bitos de administradores no t√©cnicos, facilitando la localizaci√≥n y ejecuci√≥n de acciones en pocas interacciones. Incorporar asistencia basada en¬†modelo de tareas¬†(sugerencias y autocompletar) reduce la fricci√≥n al completar formularios, mientras que mostrar¬†feedback del sistema¬†(por ejemplo, confirmaciones y barras de progreso) disminuye la incertidumbre sobre operaciones que tarden m√°s. Esta mezcla ofrece un equilibrio entre usabilidad inmediata, eficiencia y transparencia operacional, permitiendo cumplir la meta de ‚â§3 pasos y ‚â§2 minutos y facilitando la evoluci√≥n del UI conforme se recolecten datos de uso reales.

---
## T√°ctica 3: Rendimiento

### Escenario

|Cod Escenario|Atributo de Calidad|Est√≠mulo|Fuente del Est√≠mulo|Artefacto|Entorno|Respuesta|Medida de Respuesta|
|---|---|---|---|---|---|---|---|
|**ESC-04**|Rendimiento|Llegada simult√°nea de cientos de eventos de sincronizaci√≥n (create/update/delete) provenientes de RabbitMQ|Microservicios de Usuarios y Rese√±as durante picos de actividad|Consumer del servicio de Administraci√≥n General (sincronizaci√≥n de caches y BD)|Horario laboral con picos de actividad, carga elevada|El sistema limita la cantidad de eventos procesados por segundo y controla la cola interna para evitar la saturaci√≥n|El sistema mantiene la latencia <150 ms por evento, la cola nunca supera 200 mensajes, y el servicio sigue disponible|




### T√°ctica Elegida

En este caso, para asegurar un rendimiento √≥ptimo y evitar la sobrecarga del sistema, se ha optado por una combinaci√≥n de dos t√°cticas clave en el servicio de Administraci√≥n General: limitar la respuesta de eventos y controlar el tama√±o de la cola interna. Estas t√°cticas trabajan juntas para gestionar la carga, evitando picos que puedan afectar el rendimiento y asegurando que el sistema se mantenga estable bajo alta demanda. A continuaci√≥n, se documentan los detalles de esta decisi√≥n.
### Documentaci√≥n de la Decisi√≥n (ADR)

**T√≠tulo:**

Control de carga mediante limitaci√≥n de respuesta de eventos y cola interna acotada en el servicio de Administraci√≥n General

**Contexto:**

El servicio de Administraci√≥n General recibe eventos de sincronizaci√≥n enviados por los microservicios de Usuarios y Rese√±as a trav√©s de RabbitMQ, y durante picos de actividad, ya sea en horarios laborales o por acciones concurrentes no intencionales de los usuarios, puede llegar a recibir cientos de eventos por minuto, lo que genera riesgos de saturaci√≥n de CPU, crecimiento ilimitado de la cola de mensajes, aumento de la latencia de sincronizaci√≥n, congesti√≥n en los accesos a la base de datos y, en el peor de los casos, la ca√≠da total del servicio. Ante este escenario, el sistema necesita controlar la carga entrante, mantener tiempos de procesamiento estables y evitar la saturaci√≥n del servidor sin depender de soluciones costosas de escalamiento o replicaci√≥n.

**Alternativas:**

**1. Incrementar recursos de infraestructura (escalamiento vertical u horizontal)**

**Pros:**¬†
- Maneja mayor carga.

**Contras:**
- Mayor costo econ√≥mico
- No resuelve la ra√≠z (demanda excesiva sin control)
- Puede seguir satur√°ndose en ataques de alta frecuencia

**2. Introducir concurrencia sin l√≠mites (m√°s workers o threads)**

**Pros:**¬†
- M√°s velocidad de procesamiento.

**Contras:**
- Mayor consumo de memoria
- Riesgo de competir por recursos internos
- No limita la cantidad de eventos entrantes

**3. Uso de r√©plicas con balanceador de carga**

**Pros:**¬†
- Reduce contenci√≥n al repartir carga.

**Contras:**
- Alta complejidad operativa
- Sincronizaci√≥n de estados y colas
- Costos adicionales significativos
 
 **4.¬†Combinaci√≥n seleccionada: Limitar respuesta de eventos y cola interna limitada**

**Pros:**
- Controla la entrada sin necesidad de escalar infraestructura
- Evita saturaci√≥n del servicio
- Mantiene la latencia estable
- Rechaza o pospone eventos fuera del umbral permitido
- Estrategia liviana, econ√≥mica y ajustable

**Contras:**
- Algunos eventos pueden rechazarse o perderse
- Requiere pol√≠ticas claras de manejo de exceso de carga
 
**Criterios de Elecci√≥n:**

- Garantizar disponibilidad del servicio ante picos extremos  
- Mantener latencia controlada (<150 ms por evento)  
- Evitar saturaci√≥n del servidor sin aumentar costos  
- Mantener funcionamiento estable incluso con cargas inesperadas

**Decisi√≥n:**

Se adopta una estrategia combinada que incluye la limitaci√≥n de respuesta de eventos (rate limiting) y el uso de una cola interna con un l√≠mite m√°ximo de mensajes (backpressure control); los eventos que excedan estos l√≠mites ser√°n rechazados inmediatamente o puestos en espera por un tiempo muy corto (<1 s), lo que garantiza un control efectivo de la carga y evita la saturaci√≥n del servicio.

**Sustento:**

Esta estrategia proporciona un equilibrio entre rendimiento, costo y estabilidad. Limitar la cantidad de eventos que se procesan por segundo evita picos en el uso del CPU, mientras que la cola interna limitada previene el crecimiento descontrolado y la acumulaci√≥n de trabajo. A diferencia del escalamiento o replicaci√≥n, esta soluci√≥n es simple, econ√≥mica y efectiva bajo condiciones reales de operaci√≥n. Adem√°s, permite mantener el servicio disponible y en funcionamiento en todo momento, incluso ante cargas an√≥malas o inesperadas.

---

## T√°ctica 4: Seguridad

### Escenario

| **Cod Escenario** | **Atributo de Calidad** | **Est√≠mulo**                                               | **Fuente del Est√≠mulo**                  | **Artefacto**                               | **Entorno**                 | **Respuesta**                                                                 | **Medida de Respuesta**                                                     |
| ----------------- | ----------------------- | ---------------------------------------------------------- | ---------------------------------------- | ------------------------------------------- | --------------------------- | ----------------------------------------------------------------------------- | --------------------------------------------------------------------------- |
| ESC-05            | Seguridad               | Intento de acceso no autorizado al panel de administraci√≥n | Usuario no autenticado o malintencionado | M√≥dulo de autenticaci√≥n y control de acceso | Entorno de operaci√≥n normal | El sistema bloquea el intento, registra el evento y notifica al administrador | El intento se bloquea inmediatamente y se genera un log de auditor√≠a en <1s |


### T√°ctica Elegida

En este caso, con el fin de prevenir accesos no autorizados al panel de administraci√≥n, se opt√≥ por aplicar la t√°ctica de¬†autenticaci√≥n de actores, perteneciente al conjunto de t√°cticas de seguridad orientadas a resistir ataques. A continuaci√≥n, se documentan los detalles de la decisi√≥n.
### Documentaci√≥n de la Decisi√≥n (ADR)

**T√≠tulo:**  
Autenticaci√≥n de actores mediante tokens seguros para prevenir accesos no autorizados al panel administrativo

**Contexto:**  
El m√≥dulo de autenticaci√≥n y control de acceso debe proteger el panel de administraci√≥n ante intentos de ingreso no autorizado provenientes de usuarios no autenticados o malintencionados. Dado que el panel contiene informaci√≥n sensible, es necesario implementar un mecanismo que bloquee intentos ileg√≠timos, registre los eventos y notifique al administrador, asegurando que la respuesta ocurra en menos de un segundo.

**Alternativas:**

**1. Autenticar a los actores (seleccionada):**

- Verifica la identidad del usuario antes de permitir el acceso mediante credenciales seguras (usuario y contrase√±a cifrada con¬†`bcrypt`, emisi√≥n de token¬†`JWT`¬†con expiraci√≥n y firma secreta).
- Permite bloquear accesos sin token v√°lido o expirado, registrar los intentos fallidos y generar alertas autom√°ticas.
- Sencilla de implementar con librer√≠as est√°ndar (`jsonwebtoken`,¬†`bcryptjs`,¬†`passport`).

**2. Autorizar actores:**

- Se basa en definir niveles de permisos y roles tras la autenticaci√≥n, limitando las acciones que cada usuario puede realizar.
- Requiere un sistema de control de roles adicional, pero no impide por s√≠ solo accesos iniciales no autorizados.
- Adecuado como complemento, pero no como primera barrera.

**3. Limitar acceso mediante firewall o DMZ:**

- Restringe las conexiones al panel administrativo desde ubicaciones espec√≠ficas o redes internas.
- Mejora la seguridad perimetral, pero requiere configuraci√≥n de red y mantenimiento m√°s complejos, y no act√∫a directamente sobre la autenticaci√≥n del usuario.

**Criterios de Elecci√≥n:**

- Rapidez de implementaci√≥n en Express y PostgreSQL.
- Protecci√≥n inmediata ante intentos de acceso ileg√≠timo.
- Capacidad de registrar eventos y generar alertas.
- Bajo impacto en el rendimiento (<1 s en validaci√≥n).

**Decisi√≥n:**  
Se adopta la¬†autenticaci√≥n de actores¬†mediante credenciales cifradas y tokens¬†JWT¬†firmados, complementada con registro de eventos de seguridad en base de datos. El sistema bloquear√° autom√°ticamente intentos sin token v√°lido o con credenciales incorrectas, registrando el evento en el log de auditor√≠a y enviando una notificaci√≥n al administrador.

**Sustento:**  
La autenticaci√≥n es la t√°ctica m√°s directa, ligera y efectiva para detener accesos no autorizados al panel de administraci√≥n. Permite implementar pol√≠ticas de seguridad s√≥lidas con herramientas nativas del ecosistema Node.js, manteniendo bajo costo y m√≠nima complejidad operativa. A diferencia de t√°cticas m√°s estructurales (como DMZ o separaci√≥n f√≠sica de redes), esta puede integrarse r√°pidamente al flujo de Express.

---

## T√°ctica 5: Rendimiento

### Escenario

|**Cod Escenario**|**Atributo de Calidad**|**Est√≠mulo**|**Fuente del Est√≠mulo**|**Artefacto**|**Entorno**|**Respuesta**|**Medida de Respuesta**|
|---|---|---|---|---|---|---|---|
|ESC-17|Rendimiento|Carga inicial del listado completo de usuarios al login|Administrador|M√≥dulo admin con cach√© Redis|Producci√≥n|Consulta optimizada con √≠ndices y cach√© Redis|Carga completa < 5s, cache hit rate > 80%|

---

### T√°ctica Elegida

Para asegurar que el listado completo de usuarios cargue en menos de 5 segundos incluso en horarios de alta demanda, se aplic√≥ la t√°ctica de¬†mantener m√∫ltiples copias de datos mediante cach√© utilizando¬†Redis¬†como capa de acceso r√°pido.

---

### Documentaci√≥n de la Decisi√≥n (ADR)

**T√≠tulo:**  
Optimizaci√≥n de carga inicial del listado de usuarios mediante Redis Cache

**Contexto:**  
El m√≥dulo de Administraci√≥n General debe cargar el listado completo de usuarios cuando un administrador inicia sesi√≥n. Durante horas laborales, m√∫ltiples administradores pueden iniciar sesi√≥n de forma simult√°nea, lo que genera muchas solicitudes pesadas a la base de datos. Para garantizar una carga r√°pida y evitar saturaci√≥n, se requiere una forma de entregar la informaci√≥n sin consultar la base de datos en cada petici√≥n.

**Alternativas:**

1. **Consultar directamente la base de datos (sin cach√©):**
    
    - Simplicidad en la arquitectura.
        
    - Se generan consultas costosas y repetitivas.
        
    - Riesgo de superar el l√≠mite de 5s bajo concurrencia alta.
        
2. **Escalar vertical u horizontalmente la base de datos:**
    
    - Mejora la capacidad de procesamiento.
        
    - Incrementa costos operativos.
        
    - No evita la repetici√≥n innecesaria de consultas.
        
3. **Implementar paginaci√≥n estricta obligatoria:**
    
    - Reduce carga por solicitud.
        
    - No cumple con el requerimiento del escenario (carga completa inicial).
        
4. **Usar Redis Cache para mantener copia del listado (t√°ctica seleccionada):**
    
    - Reduce dr√°sticamente la latencia en la carga inicial.
        
    - Minimiza accesos a la base de datos.
        
    - Mantiene tiempos de respuesta estables (<5s).
        
    - Permite un cache hit rate superior al 80% tras la primera carga.
        

---

**Criterios de Elecci√≥n:**

- Cumplir el tiempo m√°ximo de carga (<5s).
    
- Reducir presi√≥n sobre la base de datos.
    
- Mantener consistencia entre copias mediante TTL o invalidaci√≥n controlada.
    
- Implementaci√≥n r√°pida y sin alterar m√≥dulos existentes.
    

---

**Decisi√≥n:**  
Se adopta¬†Redis Cache¬†para almacenar temporalmente el listado completo de usuarios. En cada inicio de sesi√≥n se consulta primero el cach√©; si no existe, se carga desde la base de datos y se guarda en Redis con una expiraci√≥n definida.

---

**Sustento:**  
Redis permite entregar el listado inicial de forma casi instant√°nea gracias al acceso en memoria, reduciendo significativamente el tiempo de carga y la carga sobre PostgreSQL. Con esta t√°ctica se garantiza cumplir los objetivos del escenario: carga <5 segundos y un cache hit rate superior al 80% en ambientes de producci√≥n con m√∫ltiples administradores. Adem√°s, la soluci√≥n es extensible y compatible con futuros escenarios de rendimiento.

---

[‚¨ÖÔ∏è Anterior](../5.1/5.1.md) | [üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../5.3/5.3.md)