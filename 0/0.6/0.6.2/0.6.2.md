> [0. Acerca del Grupo](../../0.md) â€º [0.6. Temas Individuales (Parte 1)](../0.6.md) â€º [0.6.2. Integrante 2](0.6.2.md)

# 0.6.2. Integrante 2

AnÃ¡lisis EstÃ¡tico de CÃ³digo: SonarQube

---
## AnÃ¡lisis EstÃ¡tico de CÃ³digo

La calidad del software es un aspecto esencial en el ciclo de vida del desarrollo, ya que influye directamente en la mantenibilidad, seguridad, confiabilidad y rendimiento de los sistemas. En entornos de desarrollo colaborativo, donde mÃºltiples desarrolladores trabajan de forma paralela, resulta fundamental contar con mecanismos que permitan detectar errores, vulnerabilidades o malas prÃ¡cticas de programaciÃ³n de manera temprana.

Dentro de las estrategias utilizadas para asegurar la calidad del software, elÂ anÃ¡lisis estÃ¡tico de cÃ³digoÂ consiste en examinar el cÃ³digo fuente sin necesidad de ejecutarlo, identificando posibles defectos o incumplimientos de estÃ¡ndares antes de que lleguen a producciÃ³n. LasÂ caracterÃ­sticasÂ que se suelen considerar para evaluar la calidad del software son la confiabilidad, seguridad, mantenibilidad, portabilidad y eficiencia del desempeÃ±o, siendo laÂ mantenibilidadÂ la mÃ¡s importante en proyectos desarrollados en equipo, ya que mide la facilidad con la que el cÃ³digo puede ser mejorado, corregido o modificado.

Beneficios del anÃ¡lisis estÃ¡tico:

- DetecciÃ³n temprana de errores y vulnerabilidades.
- Mejora de la mantenibilidad del cÃ³digo.
- ReducciÃ³n de la deuda tÃ©cnica.
- Facilita la adopciÃ³n de estÃ¡ndares de codificaciÃ³n.
- IntegraciÃ³n con pipelines de integraciÃ³n continua (CI/CD).

---

### MÃ©tricas de calidad del cÃ³digo

Las herramientas de anÃ¡lisis estÃ¡tico se apoyan en diferentes mÃ©tricas para evaluar la calidad del cÃ³digo. A continuaciÃ³n, se presentan algunas de las mÃ¡s utilizadas:

| **MÃ©trica**                 | **DescripciÃ³n**                                                    | **PropÃ³sito principal**                                            |
| --------------------------- | ------------------------------------------------------------------ | ------------------------------------------------------------------ |
| **Complejidad ciclomÃ¡tica** | Mide el nÃºmero de caminos independientes en el flujo del programa. | Evaluar la mantenibilidad y detectar mÃ³dulos con alta complejidad. |
| **DuplicaciÃ³n de cÃ³digo**   | Detecta fragmentos repetidos en diferentes partes del cÃ³digo.      | Promover la reutilizaciÃ³n y reducir el tamaÃ±o del cÃ³digo.          |
| **Code Smells**             | Identifica patrones de mal diseÃ±o o prÃ¡cticas ineficientes.        | Mejorar la legibilidad y reducir la deuda tÃ©cnica.                 |
| **Cobertura de pruebas**    | Indica el porcentaje de cÃ³digo cubierto por tests automatizados.   | Aumentar la confiabilidad del software.                            |
| **Vulnerabilidades**        | SeÃ±ala posibles fallos de seguridad en el cÃ³digo.                  | Fortalecer la seguridad y evitar exploits.                         |

Estas mÃ©tricas permiten cuantificar aspectos de la calidad interna del software y orientar a los desarrolladores en el proceso de mejora continua.

---

## Herramientas de anÃ¡lisis estÃ¡tico

Existen mÃºltiples herramientas que permiten realizar anÃ¡lisis estÃ¡tico de cÃ³digo, cada una con enfoques, lenguajes y niveles de integraciÃ³n distintos. A continuaciÃ³n, se presenta una comparativa de las herramientas mÃ¡s reconocidas en el Ã¡mbito del desarrollo de software.

| **Herramienta**       | **Lenguajes soportados**                        | **Tipo de anÃ¡lisis**                                             | **IntegraciÃ³n CI/CD**                               | **Reportes visuales**                                         | **Licencia**              |
| --------------------- | ----------------------------------------------- | ---------------------------------------------------------------- | --------------------------------------------------- | ------------------------------------------------------------- | ------------------------- |
| **SonarQube**         | Java, JavaScript, Python, C#, PHP, entre otros. | MÃ©tricas, vulnerabilidades, code smells, duplicaciÃ³n, seguridad. | SÃ­ (Jenkins, GitLab, GitHub Actions, Azure DevOps). | Panel interactivo con indicadores de calidad y deuda tÃ©cnica. | Open Source / Enterprise. |
| **PMD**               | Java, Apex, PLSQL, XML, XSL.                    | DetecciÃ³n de errores comunes y violaciones de estilo.            | Parcial.                                            | Limitado (reportes en HTML).                                  | Open Source.              |
| **Checkstyle**        | Java.                                           | ValidaciÃ³n de convenciones de estilo y formato del cÃ³digo.       | Parcial.                                            | No incluye panel visual.                                      | Open Source.              |
| **ESLint**            | JavaScript, TypeScript.                         | Linter configurable para reglas personalizadas.                  | SÃ­ (ampliamente usado en pipelines web).            | Parcial (plugins visuales).                                   | Open Source.              |
| **FindBugs/SpotBugs** | Java.                                           | DetecciÃ³n de defectos y errores comunes en bytecode.             | Limitado.                                           | Reportes HTML/XML.                                            | Open Source.              |

---

## SelecciÃ³n de la herramienta

Tras el anÃ¡lisis comparativo, se determinÃ³ queÂ SonarQubeÂ es la herramienta mÃ¡s adecuada para la implementaciÃ³n prÃ¡ctica y para su integraciÃ³n en el proyecto grupal del curso.

Las razones principales para esta elecciÃ³n son:

1. Compatibilidad multilenguaje: SonarQube soporta una amplia variedad de lenguajes de programaciÃ³n (como Java, JavaScript, Python, PHP, y mÃ¡s), lo que lo hace ideal para entornos colaborativos donde se emplean diferentes tecnologÃ­as, como en el caso del proyecto web grupal.
    
2. IntegraciÃ³n con pipelines CI/CD: Puede integrarse fÃ¡cilmente con herramientas de integraciÃ³n continua como Jenkins, GitLab CI/CD o GitHub Actions, permitiendo automatizar la revisiÃ³n de calidad en cada commit o despliegue.
    
3. Panel de control visual: Ofrece un dashboard completo con indicadores clave de calidad, deuda tÃ©cnica, duplicaciÃ³n y vulnerabilidades, facilitando el seguimiento continuo de la evoluciÃ³n del cÃ³digo.
    
4. Soporte de mÃ©tricas avanzadas: Permite personalizar reglas de calidad, establecer umbrales y definir â€œQuality Gatesâ€ que bloquean versiones que no cumplen los estÃ¡ndares definidos.

---

## Demo: ImplementaciÃ³n del AnÃ¡lisis EstÃ¡tico de CÃ³digo con SonarQube

Con el objetivo de demostrar la aplicaciÃ³n prÃ¡ctica del anÃ¡lisis estÃ¡tico de cÃ³digo, se realizÃ³ una implementaciÃ³n utilizandoÂ SonarQubeÂ como herramienta principal. El entorno de pruebas se configurÃ³ sobreÂ macOS, empleando un proyecto base desarrollado enÂ React y Node.js.

### ConfiguraciÃ³n del entorno

El entorno de trabajo se configurÃ³ en un equipo conÂ macOS, utilizando SonarQube yÂ SonarScanner.  
Los pasos principales fueron los siguientes:

1. Descarga y configuraciÃ³n de SonarQube:  
    Se descargÃ³ la versiÃ³nÂ _Community Edition_Â desde el sitio oficial de SonarQube.  
    Luego, se descomprimiÃ³ el paquete y se ejecutÃ³ el servidor con:
    
    `./sonar.sh start`
    
    Una vez iniciado, la interfaz de administraciÃ³n se accediÃ³ desde el navegador en la direcciÃ³nÂ `http://localhost:9000`.
    
1. InstalaciÃ³n del SonarScanner:  
    Se descargÃ³ elÂ SonarScanner para macOS, se descomprimiÃ³ el archivo y se aÃ±adiÃ³ su ruta al PATH del sistema:
    
    `nano ~/.zshrc export PATH=$PATH:~/Downloads/sonar-scanner-7.3.0.5189-macosx-x64/bin`
    
    Finalmente, se verificÃ³ la instalaciÃ³n con:
    
    `sonar-scanner -v`
    
1. ConfiguraciÃ³n del proyecto Reactâ€“Node.js:  
    Se creÃ³ un proyecto base de React y Node.js, aÃ±adiendo un archivoÂ `sonar-project.properties`Â con la siguiente configuraciÃ³n:
    
    `sonar.projectKey=demo_jsx sonar.projectName=Demo React Analysis sonar.sources=src sonar.language=js sonar.host.url=http://localhost:9000 sonar.login=<token-generado>`

![configuracion 1](config1.png)

![configuracion 2](config2.png)

---

### CreaciÃ³n del CÃ³digo de prueba

Para la evaluaciÃ³n se desarrollaronÂ cinco componentes JSXÂ con distintos niveles de calidad de cÃ³digo. Cada componente fue diseÃ±ado para provocar tipos de incidencias especÃ­ficas (bugs, vulnerabilidades, code smells o duplicaciones), con el fin de observar cÃ³mo SonarQube clasifica el cÃ³digo segÃºn los criterios de fiabilidad, seguridad y mantenibilidad.

| **Archivo**                 | **PropÃ³sito**             | **Tipo de Issue detectado** | **Rating esperado** |
| --------------------------- | ------------------------- | --------------------------- | ------------------- |
| `CleanComponent.jsx`        | CÃ³digo limpio y funcional | Ninguno                     | A                   |
| `CodeSmellsComponent.jsx`   | Malas prÃ¡cticas leves     | Mantenibilidad              | Bâ€“C                 |
| `SecurityRiskComponent.jsx` | Vulnerabilidad deliberada | Seguridad                   | Câ€“D                 |
| `BugComponent.jsx`          | Error lÃ³gico              | Bug (fiabilidad)            | D                   |
| `DuplicateComponent.jsx`    | CÃ³digo repetido           | Mantenibilidad              | Câ€“D                 |

---
### Resultados del anÃ¡lisis de SonarQube

Cada uno de los archivos fue analizado por SonarQube, generando resultados diferenciados segÃºn los tipos de problemas detectados. En las siguiente imagenes se muestra elÂ dashboard general del proyecto, donde se observan las mÃ©tricas globales de fiabilidad (Reliability), seguridad (Security), mantenibilidad (Maintainability), cobertura (Coverage) y duplicaciÃ³n (Duplications).

![dashboard 1](dashboard1.png)

![dashboard 2](dashboard2.png)

El resultado del anÃ¡lisis reflejÃ³ correctamente las condiciones esperadas de cada archivo:

- CleanComponent.jsxÂ obtuvo unÂ rating AÂ en todas las mÃ©tricas, evidenciando un cÃ³digo estructurado, seguro y libre de malas prÃ¡cticas.

- CodeSmellsComponent.jsxÂ presentÃ³ advertencias de mantenibilidad por el uso de variables sin emplear y comentariosÂ TODO, lo que redujo su calificaciÃ³n aÂ B/CÂ enÂ Maintainability.

- SecurityRiskComponent.jsxÂ fue identificado con unaÂ vulnerabilidad crÃ­ticaÂ por el uso de la funciÃ³nÂ eval(), prÃ¡ctica considerada insegura en entornos de ejecuciÃ³n web.

- BugComponent.jsxÂ mostrÃ³ unÂ error lÃ³gicoÂ en la funciÃ³nÂ findItem, detectado como bug de fiabilidad, generando un ratingÂ DÂ enÂ Reliability.

- DuplicateComponent.jsxÂ obtuvo unÂ rating Câ€“D, debido a la duplicaciÃ³n de bloques de cÃ³digo similares, lo que afectÃ³ su mantenibilidad.


En la siguientes imagenes se observa un ejemplo delÂ issue reportÂ generado por SonarQube, donde se detalla el tipo de problema, su severidad y una breve descripciÃ³n de la causa detectada.
![Issue Report 1](report1.png)

![Issue Report 2](report2.png)


---

[â¬…ï¸ Anterior](../0.6.1/0.6.1.md) | [ğŸ  Home](../../../README.md) | [Siguiente â¡ï¸](../0.6.3/0.6.3.md)