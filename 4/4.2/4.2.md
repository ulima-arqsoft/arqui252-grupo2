> [4. Decisiones Iniciales de Arquitectura](../4.md) ‚Ä∫ [4.2. M√≥dulo 2 / Integrante 2](4.2.md)

# 4.2. M√≥dulo 2 / Integrante 2

## M√≥dulo 02 - Administraci√≥n General:

#### Asignaci√≥n de Responsabilidades

**T√≠tulo:**
Validaci√≥n de permisos para acceso a funcionalidades de administrador

**Contexto:**  
El m√≥dulo permite a los administradores acceder a informaci√≥n sensible del sistema y ejecutar acciones cr√≠ticas, como modificar el estado o tipo de las cuentas de usuario, configurar categor√≠as de rese√±as y otras operaciones restringidas. Por motivos de seguridad, es necesario definir qu√© componente del sistema (frontend o backend) ser√° responsable de controlar que √∫nicamente los usuarios autorizados, con rol de administrador, puedan acceder a estas funcionalidades.

**Alternativas:**

1. Validar permisos √∫nicamente en el¬†frontend.
2. Validar permisos √∫nicamente en el¬†backend.
3. Aplicar una¬†validaci√≥n doble¬†(frontend y backend).

**Criterios de elecci√≥n:**

- Seguridad.
- Escalabilidad para incorporaci√≥n de nuevos roles.
- Experiencia de usuario (UX).

**Decisi√≥n:**  
Se elige aplicar una¬†validaci√≥n doble, tanto en el frontend como en el backend.

**Sustento:**  
La validaci√≥n doble proporciona un control m√°s robusto y equilibrado. La verificaci√≥n en el backend garantiza la protecci√≥n de los endpoints sensibles y refuerza la seguridad general del sistema, mientras que la validaci√≥n en el frontend mejora la experiencia del usuario al ocultar din√°micamente las vistas y opciones no autorizadas. Esta combinaci√≥n mantiene una alta usabilidad sin comprometer la seguridad, y facilita la futura expansi√≥n hacia nuevos roles administrativos o jer√°rquicos.

---
#### Modelo de Coordinaci√≥n

**T√≠tulo:**  
Elecci√≥n de estrategia de actualizaci√≥n del dashboard administrativo entre actualizaci√≥n as√≠ncrona o en tiempo real

**Contexto:**  
El m√≥dulo de administraci√≥n general requiere mostrar m√©tricas agregadas del sistema (usuarios activos, calificaciones recientes, reportes, etc.). Estas m√©tricas pueden variar con el tiempo, pero no son cr√≠ticas ni requieren informaci√≥n actualizada en tiempo real. Sin embargo, deben mantenerse razonablemente actualizadas para facilitar la toma de decisiones por parte de los administradores.

**Alternativas:**

1. Actualizaci√≥n en tiempo real (sincron√≠a continua):  
	- Utilizar WebSockets o Server-Sent Events (SSE) para actualizar el dashboard en tiempo real.

3. Actualizaci√≥n manual √∫nicamente:  
	- Permitir que el administrador actualice las m√©tricas solo al presionar un bot√≥n.

5. Actualizaci√≥n as√≠ncrona programada con control manual:  
	- Refrescar las m√©tricas autom√°ticamente en intervalos definidos (por ejemplo, cada hora) y permitir actualizaci√≥n manual bajo demanda. Se evita la redundancia mediante almacenamiento en cach√© en el servidor.

**Criterios de elecci√≥n:**

- Carga del servidor y eficiencia.
- Escalabilidad ante m√∫ltiples administradores concurrentes.
- Actualidad y coherencia de la informaci√≥n.
- Facilidad de integraci√≥n con API REST.

**Decisi√≥n:**  
Se adopta una¬†actualizaci√≥n as√≠ncrona programada con control manual¬†por parte del usuario cuando sea necesario.

**Sustento:**  
Dado que las m√©tricas del dashboard no requieren actualizaciones en tiempo real, se opta por una soluci√≥n eficiente que reduzca la carga del sistema y mantenga la coherencia de los datos. La actualizaci√≥n se ejecutar√° de forma programada (por ejemplo, cada hora) y los resultados se servir√°n desde un cach√© compartido en el backend. Si un administrador actualiz√≥ recientemente la informaci√≥n (por ejemplo, hace menos de cinco minutos), las siguientes solicitudes recibir√°n la misma respuesta, evitando rec√°lculos innecesarios. Esta estrategia garantiza un equilibrio entre eficiencia, coherencia y experiencia de usuario, manteniendo la informaci√≥n actualizada sin afectar el rendimiento del sistema.

---
#### Modelo de Datos

**T√≠tulo:**  
Implementaci√≥n de √≠ndices en campos cr√≠ticos para optimizar la generaci√≥n de m√©tricas del dashboard

**Contexto:**  
El m√≥dulo de administraci√≥n general incluye un dashboard que presenta m√©tricas y reportes sobre usuarios, acciones y actividades. Algunas de estas consultas implican filtrar o agrupar grandes vol√∫menes de datos (por ejemplo, cantidad de usuarios activos por fecha o tipo de acci√≥n). Sin una indexaci√≥n adecuada, el rendimiento de las consultas podr√≠a verse afectado significativamente conforme aumenta la cantidad de usuarios y, con ello, el volumen de datos en la base de datos.

**Alternativas:**

1. **Sin √≠ndices adicionales:**  
    - Utilizar √∫nicamente los √≠ndices primarios definidos por defecto.
    
2. **Indexaci√≥n manual en campos clave:**  
    - Crear √≠ndices sobre campos utilizados frecuentemente en filtros o agrupaciones (por ejemplo,¬†`fecha_de_accion`,¬†`tipo_de_usuario`, etc.).
    
3. **Indexaci√≥n automatizada por el ORM o motor de base de datos:**  
    - Permitir que la herramienta de persistencia gestione la creaci√≥n de √≠ndices seg√∫n los patrones de uso detectados.
    

**Criterios de elecci√≥n:**

- Rendimiento en consultas de lectura intensiva.
- Escalabilidad del sistema ante el aumento de registros.
- Impacto en el tiempo de escritura o inserci√≥n de datos.

**Decisi√≥n:**  
Se implementar√°¬†indexaci√≥n manual en campos cr√≠ticos¬†de las tablas m√°s consultadas por el dashboard administrativo.

**Sustento:**  
Esta estrategia ofrece un equilibrio entre rendimiento y control. Permite optimizar las consultas de m√©tricas sin depender de mecanismos autom√°ticos del ORM, los cuales podr√≠an no reflejar las necesidades reales del m√≥dulo. Asimismo, la indexaci√≥n manual facilita el ajuste progresivo de los √≠ndices conforme se identifiquen nuevos patrones de uso, priorizando los campos m√°s utilizados en la generaci√≥n de reportes y m√©tricas administrativas. Esto mejora el tiempo de respuesta del dashboard y contribuye a la escalabilidad y mantenibilidad del sistema.

---
#### Mapeo entre elementos de arquitectura

**T√≠tulo:**  
Separaci√≥n de rutas administrativas y validaci√≥n de acceso mediante middleware por rol de administrador

**Contexto:**  
El m√≥dulo de administraci√≥n general permite realizar acciones cr√≠ticas como modificar estados de cuenta, eliminar contenido y generar m√©tricas. Estas operaciones deben estar completamente separadas de los flujos de los usuarios comunes (como estudiantes o docentes) para garantizar la seguridad y evitar accesos indebidos.

**Alternativas:**

1. **Rutas separadas y protegidas por middleware:**  
    - Definir rutas del tipo¬†`/admin/usuarios`,¬†`/admin/rese√±as`,¬†`/admin/m√©tricas`, protegidas mediante middleware que valide el rol de administrador antes de ejecutar cualquier controlador.
    
2. **Rutas compartidas con control interno en los controladores:**  
    - Utilizar los mismos endpoints para todos los usuarios, pero validar el rol dentro de la l√≥gica del controlador. Esta opci√≥n reduce la cantidad de rutas, aunque incrementa el riesgo de errores y accesos indebidos.
    

**Criterios de elecci√≥n:**

- Seguridad y trazabilidad de acciones.
- Facilidad de mantenimiento y escalabilidad.
- Claridad en la separaci√≥n entre flujos administrativos y de usuario.

**Decisi√≥n:**  
Se implementar√°n rutas separadas bajo el prefijo¬†`/admin`, protegidas mediante middleware de validaci√≥n de rol de administrador antes de permitir el acceso a los controladores.

**Sustento:**  
Esta decisi√≥n fortalece la seguridad del sistema y facilita la auditor√≠a de operaciones administrativas. Adem√°s, mejora la mantenibilidad al mantener la l√≥gica administrativa completamente aislada de los flujos de usuario general. Esta separaci√≥n clara de responsabilidades permite escalar el sistema e incorporar nuevos roles sin comprometer la integridad ni la trazabilidad de las acciones administrativas.

---
#### Elecci√≥n de Tecnolog√≠a

**T√≠tulo:**  
Elecci√≥n de Node-Cache frente a Redis como mecanismo de cach√© para las m√©tricas del dashboard

**Contexto:**  
El m√≥dulo de Administraci√≥n General requiere optimizar el tiempo de respuesta del dashboard, el cual muestra m√©tricas calculadas a partir de grandes vol√∫menes de datos del sistema. Consultar la base de datos en cada solicitud podr√≠a generar una sobrecarga innecesaria y afectar el rendimiento general. Por ello, se necesita una soluci√≥n de almacenamiento temporal que permita conservar los resultados de las m√©tricas y renovarlos en intervalos definidos, reduciendo el n√∫mero de consultas directas a la base de datos.

**Alternativas:**

1. **Redis:**  
    - Cach√© distribuido y persistente, altamente escalable y adecuado para arquitecturas con m√∫ltiples instancias o despliegues en cl√∫ster. Requiere infraestructura adicional, configuraci√≥n y mantenimiento del servicio externo.
    
2. **Node-Cache:**  
    - Cach√© en memoria local, ligero y sencillo de implementar. Permite una integraci√≥n directa con aplicaciones Node.js sin dependencias externas, aunque su alcance est√° limitado a una sola instancia del servidor y no ofrece persistencia.

**Criterios de elecci√≥n:**

- Facilidad de implementaci√≥n.
- Requerimientos de infraestructura.
- Escalabilidad futura.
- Rendimiento en entornos monol√≠ticos o de baja concurrencia.

**Decisi√≥n:**  
Se elige¬†Node-Cache¬†como tecnolog√≠a de almacenamiento temporal para las m√©tricas del dashboard.

**Sustento:**  
Node-Cache proporciona una soluci√≥n pr√°ctica, eficiente y de r√°pida implementaci√≥n para el entorno actual del sistema, que opera bajo una arquitectura monol√≠tica. Su simplicidad permite reducir la latencia de respuesta en el dashboard sin a√±adir complejidad a la infraestructura. Adem√°s, esta elecci√≥n no compromete la escalabilidad futura, ya que la l√≥gica de cach√© puede migrarse f√°cilmente a Redis cuando el sistema evolucione hacia una arquitectura distribuida o requiera persistencia del cach√©.

---

[‚¨ÖÔ∏è Anterior](../4.1/4.1.md) | [üè† Home](../../README.md) | [Siguiente ‚û°Ô∏è](../4.3/4.3.md)