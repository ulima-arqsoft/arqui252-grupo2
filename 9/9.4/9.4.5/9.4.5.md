> [9. Metodolog√≠a de Dise√±o de Arquitectura - Aplicaci√≥n de ADD](../../9.md) ‚Ä∫ [9.4. Iteraci√≥n 3: Refinar estructuras para abordar el atributo de calidad m√°s importante](../9.4.md) ‚Ä∫ [9.4.5. Vistas y Decisiones](9.4.5.md)

# 9.4.5 Vistas y Decisiones

## Vista L√≥gica
- Se a√±adi√≥ una capa completa de **autorizaci√≥n** desacoplada de la autenticaci√≥n.
- La l√≥gica de seguridad se organiza en m√≥dulos:
  - Autenticaci√≥n
  - Autorizaci√≥n
  - Validaci√≥n de sesi√≥n
  - Gesti√≥n de tokens
  - Auditor√≠a y notificaciones de seguridad
  - 2FA (email/TOTP)

Este dise√±o incrementa la claridad, auditabilidad y extensibilidad del m√≥dulo.

## Vista de Despliegue
La infraestructura no cambi√≥ en su topolog√≠a:
- Auth Service
- PostgreSQL
- Redis (ahora usado tambi√©n para detecci√≥n de anomal√≠as y fallback de OTP)
- RabbitMQ
- Proveedor de correo SendGrid/Fallback

Pero s√≠ cambi√≥ en su **comportamiento arquitect√≥nico**:
- Redis se vuelve componente clave para resiliencia.
- Se ampl√≠a la funci√≥n de RabbitMQ para propagar eventos de seguridad.

## Vista de Procesos
Flujos reforzados:

### Login reforzado
1. Validaci√≥n de credenciales  
2. Revisi√≥n de metadata de sesi√≥n  
3. 2FA Email ‚Üí fallback TOTP  
4. Emisi√≥n de tokens con auditor√≠a  

### Acciones cr√≠ticas
- Reautenticaci√≥n (contrase√±a o 2FA)
- Validaci√≥n de rol y propiedad
- Notificaci√≥n inmediata al usuario

### Manejo de anomal√≠as
- Detecci√≥n de cambios de IP/User-Agent
- Revocaci√≥n de tokens
- Registro de evento de seguridad

Estos cambios mejoran la protecci√≥n sin afectar la experiencia del usuario.


[‚¨ÖÔ∏è Anterior](../9.4.4/9.4.4.md) | [üè† Home](../../../README.md) | [Siguiente ‚û°Ô∏è](../9.4.6/9.4.6.md)